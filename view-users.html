<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Mr-Hamed Yosry">
  <meta name="theme-color" content="#ffffff">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content=" ูุงุฌุจู ">
  <meta property="og:description" content="ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุจุณูููุฉ ููุนุงููุฉ">
  <meta property="og:image" content="https://lh3.googleusercontent.com/d/1pfADEnGklJi0anW7xGBMLWCRUQ34SvMj=w1200">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ar_AR">

  <!-- Favicon -->
  <link rel="icon" href="poto/3.png" type="image/png">

  <title>ูุธุงู ุฅุฏุงุฑุฉ ุงูุทูุงุจ</title>
  
  <!-- ููุน ุงูุชุฎุฒูู ุงููุคูุช (ููู ูููุน ุงูุนูุฏุฉ ุงูุชููุงุฆูุฉ ุจุนุฏ ุงูุฎุฑูุฌ) -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- ุฎุทูุท Google -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="style/view-users.css">
</head>

<body>
  <!-- ุงูุดุฑูุท ุงูุนููู -->
  <div class="navbar">
    <div class="navbar-container">
      <button class="hamburger" onclick="toggleNav()">โฐ</button>
      <div class="navbar-links" id="navbarLinks">
        <a href="user-naw.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="view-users.html" class="active">ุงุฏุงุฑุฉ ุงููุณุชุฎุฏููู</a>
        <a href="uu.html">ุงุถุงูุฉ ุงููุงุฌุจุงุช</a>
        <a href="word.html">ุงุถุงูุฉ ุงูุงุณุฆูุฉ ููุฑุฏ</a>
        <a href="manage_lectures_and_questions.html">ุนุฑุถ ุงููุญุงุถุฑุงุช ูุชุนุฏูููุง</a>
        <a href="send_lecture.html">ุงุฑุณุงู ุงููุงุฌุจ</a>
        <a href="h.html">ูุนุงููุฉ ุงููุงุฌุจ</a>
        <a href="subscriptions.html">ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู</a>
        <a href="bot.html">ุจูุช ุงูุทูุงุจ</a>
      </div>
      <div class="navbar-actions">
        <a href="profaul.html" class="user-icon">
          <i class="fa-solid fa-circle-user fa-bounce"></i>
        </a>
        <button class="theme-toggle-btn" onclick="toggleTheme()">
          <span id="theme-icon">๐</span>
          <span id="theme-text">ุงููุถุน ุงููููู</span>
        </button>
        <button class="logout-btn" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
      </div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุงูุงุดุชุฑุงู -->
  <div id="subscription-block">
    <h2>โ ุงูุชูุช ุตูุงุญูุฉ ุงุดุชุฑุงูู</h2>
    <p>ููุฃุณูุ ุงูุชูุช ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุฃู ุงุดุชุฑุงูู.</p>
    <p>ููุงุณุชูุฑุงุฑ ูู ุงุณุชุฎุฏุงู ุงูููุฑุณุ ูุฑุฌู ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู.</p>
    <button class="renew-btn" onclick="renewSubscription()">ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู</button>
  </div>

  <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
  <div class="main-content">
    <div class="search-bar">
      <input type="text" class="search-input" placeholder="ุงุจุญุซ ุนู ุทุงูุจ..." id="search-input" />
      <button class="search-btn" onclick="searchStudents()">ุจุญุซ</button>
    </div>

    <div class="container">
      <h1>๐ ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏููู</h1>

      <div class="profile-header">
        <div class="profile-info">
          <div class="info-item">
            <span class="info-label">ุนุฏุฏ ุงูุทูุงุจ (ุฌููุน ุงููุฑู)</span>
            <span id="total-students" class="info-value">0</span>
          </div>
          <div class="info-item">
            <span class="info-label">ุงูุญุฏ ุงูุฃูุตู</span>
            <span id="max-students" class="info-value">0</span>
          </div>
        </div>
        <div class="actions">
          <button class="btn btn-primary" onclick="openAddModal()">โ ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</button>
          <button class="btn btn-primary" onclick="openAddGroupModal()">โ ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ</button>
        </div>
      </div>

      <!-- ุงุฎุชูุงุฑ ุงููุฑูุฉ -->
      <div class="group-selector">
        <button class="group-btn active" onclick="changeGroup('ุงููุฑูุฉ ุงูุฃููู')">ุงููุฑูุฉ ุงูุฃููู</button>
        <button class="group-btn" onclick="changeGroup('ุงููุฑูุฉ ุงูุซุงููุฉ')">ุงููุฑูุฉ ุงูุซุงููุฉ</button>
        <button class="group-btn" onclick="changeGroup('ุงููุฑูุฉ ุงูุซุงูุซุฉ')">ุงููุฑูุฉ ุงูุซุงูุซุฉ</button>
        <button class="group-btn" onclick="changeGroup('ุงููุฑูุฉ ุงูุฑุงุจุนุฉ')">ุงููุฑูุฉ ุงูุฑุงุจุนุฉ</button>
      </div>

      <!-- ุงุฎุชูุงุฑ ุงููุฌููุนุฉ ุงููุฑุนูุฉ -->
      <div id="subgroup-selector" class="group-selector" style="display: none;"></div>

      <!-- ุงูุฌุฏูู -->
      <div class="table-container">
        <table id="students-table">
          <thead>
            <tr>
              <th>ู</th>
              <th>ID</th>
              <th>ุงุณู ุงูุทุงูุจ</th>
              <th>ุงุณู ุงููุณุชุฎุฏู</th>
              <th>ุฑูู ุงูุทุงูุจ</th>
              <th>ุฑูู ููู ุงูุฃูุฑ</th>
              <th>ุงููุฑูุฉ</th>
              <th>ุงููุฌููุนุฉ</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody id="table-body"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุฅุถุงูุฉ ุทุงูุจ -->
  <div id="add-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">โ ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h3>
        <button class="close-btn" onclick="closeAddModal()">&times;</button>
      </div>
      <form id="add-form" onsubmit="addStudent(event)">
        <div class="form-group">
          <label>ุงุณู ุงูุทุงูุจ</label>
          <input type="text" class="form-control" id="student-name" required />
        </div>
        <div class="form-group">
          <label>ุงุณู ุงููุณุชุฎุฏู</label>
          <input type="text" class="form-control" id="student-username" />
        </div>
        <div class="form-group">
          <label>ุฑูู ุงูุทุงูุจ</label>
          <input type="text" class="form-control" id="student-phone" required />
        </div>
        <div class="form-group">
          <label>ุฑูู ููู ุงูุฃูุฑ</label>
          <input type="text" class="form-control" id="parent-phone" required />
        </div>
        <div class="form-group">
          <label>ุงููุฑูุฉ</label>
          <select class="form-select" id="student-group" required onchange="updateSubgroupOptions()">
            <option value="ุงููุฑูุฉ ุงูุฃููู">ุงููุฑูุฉ ุงูุฃููู</option>
            <option value="ุงููุฑูุฉ ุงูุซุงููุฉ">ุงููุฑูุฉ ุงูุซุงููุฉ</option>
            <option value="ุงููุฑูุฉ ุงูุซุงูุซุฉ">ุงููุฑูุฉ ุงูุซุงูุซุฉ</option>
            <option value="ุงููุฑูุฉ ุงูุฑุงุจุนุฉ">ุงููุฑูุฉ ุงูุฑุงุจุนุฉ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ุงุฎุชุฑ ุงููุฌููุนุฉ</label>
          <select class="form-select" id="student-subgroup" onchange="handleSubgroupChange()">
            <option value="">ุงุฎุชุฑ ูุฌููุนุฉ...</option>
            <option value="new_group">โ ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ</option>
          </select>
        </div>
        <div class="form-group" id="new-group-input" style="display: none;">
          <label>ุงุณู ุงููุฌููุนุฉ ุงูุฌุฏูุฏุฉ</label>
          <div style="display: flex; gap: 0.5rem;">
            <input type="text" class="form-control" id="new-group-name" placeholder="ุงูุชุจ ุงุณู ุงููุฌููุนุฉ" />
            <button type="button" class="btn btn-primary" onclick="addNewGroup()" style="white-space: nowrap;">ุญูุธ</button>
          </div>
        </div>
        <div class="form-group">
          <label>ุงูุญุงูุฉ</label>
          <select class="form-select" id="student-status" required>
            <option value="approved">ููุจูู</option>
            <option value="pending">ููุฏ ุงูุงูุชุธุงุฑ</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary btn-block">ุฅุถุงูุฉ ุงูุทุงูุจ</button>
      </form>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ -->
  <div id="add-group-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">โ ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ</h3>
        <button class="close-btn" onclick="closeAddGroupModal()">&times;</button>
      </div>
      <div class="form-group">
        <label>ุงุฎุชุฑ ุงููุฑูุฉ</label>
        <select class="form-select" id="group-level-select" required onchange="enableGroupNameInput()">
          <option value="">ุงุฎุชุฑ ูุฑูุฉ...</option>
          <option value="ุงููุฑูุฉ ุงูุฃููู">ุงููุฑูุฉ ุงูุฃููู</option>
          <option value="ุงููุฑูุฉ ุงูุซุงููุฉ">ุงููุฑูุฉ ุงูุซุงููุฉ</option>
          <option value="ุงููุฑูุฉ ุงูุซุงูุซุฉ">ุงููุฑูุฉ ุงูุซุงูุซุฉ</option>
          <option value="ุงููุฑูุฉ ุงูุฑุงุจุนุฉ">ุงููุฑูุฉ ุงูุฑุงุจุนุฉ</option>
        </select>
      </div>
      <div class="form-group">
        <label>ุงุณู ุงููุฌููุนุฉ ุงูุฌุฏูุฏุฉ</label>
        <input type="text" class="form-control" id="new-group-name-modal" placeholder="ุงูุชุจ ุงุณู ุงููุฌููุนุฉ" disabled />
      </div>
      <button type="button" class="btn btn-primary btn-block" onclick="addNewGroupFromModal()">ุฅุถุงูุฉ ุงููุฌููุนุฉ</button>
    </div>
  </div>

  <!-- ุฒุฑ ุงูุฅุดุนุงุฑุงุช -->
  <div class="notification-container">
    <button class="notification-bell" onclick="toggleNotifications()">
      <i class="fas fa-bell"></i>
      <span class="notification-badge" id="notification-count">0</span>
    </button>
    <div class="notification-box" id="notification-box">
      <div class="notification-header">
        <span>ุงูุฅุดุนุงุฑุงุช</span>
        <button class="clear-all-btn" onclick="clearAllNotifications()">ูุณุญ ุงููู</button>
      </div>
      <div id="notification-list"></div>
    </div>
  </div>

  <!-- ุฑุณุงูุฉ ุงูุชุญุฐูุฑ -->
  <div id="warning-message" class="warning-message" style="display: none;">
    <i class="fas fa-exclamation-triangle"></i>
    <span id="warning-text"></span>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="script/view-users.js"></script>
</body>
</html>