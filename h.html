<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Mr-Hamed Yosry">
  <meta name="theme-color" content="#ffffff">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content=" ูุงุฌุจู ">
  <meta property="og:description" content="ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุจุณูููุฉ ููุนุงููุฉ">
  <meta property="og:image" content="https://lh3.googleusercontent.com/d/1pfADEnGklJi0anW7xGBMLWCRUQ34SvMj=w1200">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="ar_AR">

  <!-- Website Title -->
  <title>Wajabk</title>

  <!-- Favicon -->
  <link rel="icon" href="poto/3.png" type="image/png">

  <title>ูุชุงุจุนุฉ ุฅุฌุงุจุงุช ุงูุทูุงุจ</title>
  <!-- ุฎุทูุท ูุฃููููุงุช -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style/h.css">
</head>
<body>
  <!-- ุงูุดุฑูุท ุงูุนููู -->
  <div class="navbar">
    <div class="navbar-container">
      <button class="hamburger" onclick="toggleNav()">โฐ</button>
      <div class="navbar-links" id="navbarLinks">
        <a href="user-naw.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="view-users.html" >ุงุฏุงุฑุฉ ุงููุณุชุฎุฏููู</a>
        <a href="uu.html">ุงุถุงูุฉ ุงููุงุฌุจุงุช</a>
        <a href="word.html">ุงุถุงูุฉ ุงูุงุณุฆูุฉ ููุฑุฏ</a>
        <a href="manage_lectures_and_questions.html">ุนุฑุถ ุงููุญุงุถุฑุงุช ูุชุนุฏูููุง</a>
        <a href="send_lecture.html">ุงุฑุณุงู ุงููุงุฌุจ</a>
        <a href="h.html"class="active">ูุนุงููุฉ ุงููุงุฌุจ</a>
        <a href="subscriptions.html">ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู </a>
        <a href="bot.html">ุจูุช ุงูุทูุงุจ</a>
      </div>
      <div class="navbar-actions">
        <a href="profaul.html" class="user-icon">
          <i class="fa-solid fa-circle-user fa-bounce"></i>
        </a>
        <button class="theme-toggle-btn" onclick="toggleTheme()">
          <span id="theme-icon">๐</span>
          <span id="theme-text">ุงููุถุน ุงููููู</span>
        </button>
        <button class="logout-btn" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
      </div>
    </div>
  </div>
  <!-- ุฒุฑ ุงูุฅุดุนุงุฑุงุช -->
  <div class="notification-container">
    <button class="notification-bell" onclick="toggleNotifications()">
      ๐
      <span class="notification-badge" id="notification-count">0</span>
    </button>
    <div class="notification-box" id="notification-box">
      <div class="notification-header">
        <span>ุงูุฅุดุนุงุฑุงุช</span>
        <button class="clear-all-btn" onclick="clearAllNotifications()">ูุณุญ ุงููู</button>
      </div>
      <div id="notification-list"></div>
    </div>
  </div>
  <!-- ูุงูุฐุฉ ุงูุงุดุชุฑุงู -->
  <div id="subscription-block" style="display: none; text-align: center; padding: 2rem; background: #fff8e1; border-radius: 1rem; margin: 2rem auto; max-width: 500px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
    <h2>โ ุงูุชูุช ุตูุงุญูุฉ ุงุดุชุฑุงูู</h2>
    <p>ููุฃุณูุ ุงูุชูุช ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุฃู ุงุดุชุฑุงูู.</p>
    <p>ููุงุณุชูุฑุงุฑ ูู ุงุณุชุฎุฏุงู ุงูููุฑุณุ ูุฑุฌู ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู.</p>
    <button class="renew-btn" style="background: #FF9800; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 2rem; font-weight: 600; cursor: pointer; margin-top: 1rem;" onclick="renewSubscription()">ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู</button>
  </div>
  <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
  <div class="container">
    <h1>ูุชุงุจุนุฉ ุฅุฌุงุจุงุช ุงูุทูุงุจ</h1>
    <!-- ุงุฎุชูุงุฑ ุงููุฑูุฉ -->
    <div class="select-group">
      <h3>ุงุฎุชุฑ ุงููุฑูุฉ:</h3>
      <div id="groupsButtons" class="buttons-container">
        <div class="loader">ุฌุงุฑู ุชุญููู ุงููุฑู...</div>
      </div>
    </div>

    <!-- ุงุฎุชูุงุฑ ุงููุฌููุนุฉ ุงููุฑุนูุฉ -->
    <div id="groupsSelector" style="display: none;">
      <h3>ุงุฎุชุฑ ุงููุฌููุนุฉ ุงููุฑุนูุฉ:</h3>
      <div id="subGroupsButtons" class="buttons-container">
        <div class="loader">ุฌุงุฑู ุชุญููู ุงููุฌููุนุงุช...</div>
      </div>
    </div>

    <!-- ูุณู ุงููุญุงุถุฑุงุช -->
    <div id="lecturesSection" style="display: none;">
      <h2>ุงุฎุชุฑ ุงููุญุงุถุฑุฉ</h2>
      <div class="table-container">
        <table id="lectures-table">
          <thead>
            <tr>
              <th>ู</th>
              <th>ุนููุงู ุงููุญุงุถุฑุฉ</th>
              <th>ุนุฏุฏ ุงูุฃุณุฆูุฉ</th>
              <th>ุงูุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody id="lecturesTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- ูุณู ุงูุทูุงุจ -->
    <div id="studentsSection" style="display: none;">
      <h2 id="lectureTitle">ุทูุงุจ ูุญุงุถุฑุฉ: [ุบูุฑ ูุนุฑูู]</h2>
      <div class="filter-buttons">
        <button class="btn" style="background:#00D68F;" onclick="filterStudents('submitted')">ุงูุฐูู ุฃุฌุงุจูุง โ</button>
        <button class="btn" style="background:#FF9800;" onclick="filterStudents('pending')">ูู ูุฌูุจูุง ุจุนุฏ โณ</button>
        <button class="btn" style="background:#6c757d;" onclick="filterStudents('all')">ุฅุธูุงุฑ ุงููู</button>
      </div>
      <div class="actions">
        <button class="btn export-btn" onclick="exportAnswersToExcel()">ุชุตุฏูุฑ ุฅูู Excel</button>
        <button class="btn whatsapp-btn" onclick="sendReminders()">ุชุฐููุฑ ุบูุฑ ุงููุฌูุจูู</button>
        <button class="btn" id="messageBtn" onclick="openMessageModal()">ุฅุฑุณุงู ุฑุณุงูุฉ</button>
      </div>
      <div class="table-container">
        <table id="students-table">
          <thead>
            <tr>
              <th>ู</th>
              <th>ุงูุงุณู</th>
              <th>ุงุณู ุงููุณุชุฎุฏู</th>
              <th>ุฑูู ุงููุงุชู</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุงูุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody"></tbody>
        </table>
      </div>
    </div>
    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div class="loader" id="loader">ุฌุงุฑู ุงูุชุญููู...</div>
  </div>

  <!-- ูุงูุฐุฉ ุนุฑุถ ุฅุฌุงุจุงุช ุงูุทุงูุจ -->
  <div class="modal" id="answerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalStudentName">ุฅุฌุงุจุงุช ุงูุทุงูุจ: ุฃุญูุฏ</h2>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ -->
  <div class="modal" id="messageModal">
    <div class="modal-content message-modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-paper-plane"></i> ุฅุฑุณุงู ุฑุณุงูุฉ</h2>
        <button class="modal-close" onclick="closeMessageModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="messageForm">
          <div style="margin-bottom: 1.2rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;"><i class="fas fa-users-cog"></i> ููุน ุงููุณุชูู</label>
            <select id="recipientType" required style="width: 100%; padding: 0.7rem; border: 1px solid var(--border-color); border-radius: 0.5rem; font-size: 0.9rem;">
              <option value="specific">ุทุงูุจ ูุญุฏุฏ</option>
              <option value="group" selected>ุฌููุน ุงูุทูุงุจ ูู ุงููุฑูุฉ</option>
              <option value="all">ุฌููุน ุงูุทูุงุจ ูู ุงููุธุงู</option>
            </select>
          </div>
          <div id="specificUserField" style="margin-bottom: 1.2rem; display: none;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;"><i class="fas fa-user-graduate"></i> ุงุฎุชุฑ ุงูุทุงูุจ</label>
            <select id="specificUserSelect" style="width: 100%; padding: 0.7rem; border: 1px solid var(--border-color); border-radius: 0.5rem; font-size: 0.9rem;">
              <option value="">ุฌุงุฑู ุงูุชุญููู...</option>
            </select>
          </div>
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;"><i class="fas fa-comment-dots"></i> ุงูุฑุณุงูุฉ</label>
            <textarea id="messageText" rows="5" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." required
                      style="width: 100%; padding: 0.8rem; border: 1px solid var(--border-color); border-radius: 0.5rem; resize: vertical; font-family: 'Cairo', sans-serif;"></textarea>
          </div>
          <div style="text-align: left; margin-top: 1rem; display: flex; gap: 0.8rem; justify-content: flex-end;">
            <button type="button" class="btn" style="background: #6c757d;" onclick="closeMessageModal()">
              <i class="fas fa-times"></i> ุฅูุบุงุก
            </button>
            <button type="submit" class="btn" style="background: var(--accent-color); color: #000;">
              <span id="sendSpinner" style="display: none;"><i class="fas fa-spinner fa-spin"></i></span>
              <span id="sendText"><i class="fas fa-paper-plane"></i> ุฅุฑุณุงู</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Firebase ู Excel -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="script/h.js"></script>
</body>
</html>